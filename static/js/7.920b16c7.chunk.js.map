{"version":3,"sources":["components/errorMessage/error.gif","components/errorMessage/ErrorMessage.js","services/MarvelService.js","hooks/http.hook.js","resources/img/Avengers.png","resources/img/Avengers_logo.png","components/appBanner/AppBanner.js","components/comicsList/ComicsList.js","components/pages/ComicsPage.js"],"names":["ErrorMessage","style","display","width","height","objectFit","margin","src","img","alt","useMarvelService","useState","processState","setProcessState","request","useCallback","url","a","method","body","headers","fetch","response","ok","Error","status","json","data","clearError","useHttp","_apiBase","_apiKey","process","_baseOffset","getAllCharacters","offset","res","results","map","_transformCharacter","getCharacter","id","getAllComics","_transformComics","getComic","getCharByName","name","char","description","slice","thumbnail","path","extension","homepage","urls","wiki","comics","items","splice","comic","title","pageCount","language","textObjects","price","prices","AppBanner","className","avengers","avengersLogo","setContent","Component","newItemLoading","Spinner","ComicsList","comicsList","setComicsList","setNewItemLoading","setOffset","comicsEnded","setComicsEnded","useEffect","onRequest","initial","then","onComicsListLoaded","newComicsList","ended","length","arr","item","i","tabIndex","to","renderComics","disabled","onClick","ComicsPage","Helmet","content"],"mappings":"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","file":"static/js/7.920b16c7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/error.42292aa1.gif\";","import img from './error.gif';\r\n\r\nconst ErrorMessage = () => {\r\n    return (\r\n        <img style={{ display: 'block', width: '250px', height: '250px', objectFit: 'contain', margin: '0 auto'}} src={img} alt='Error'/>\r\n    )\r\n}\r\n\r\nexport default ErrorMessage;","import { useHttp } from \"../hooks/http.hook\";\r\n\r\nconst useMarvelService = () => {\r\n    const {request, clearError, processState, setProcessState} = useHttp();\r\n\r\n    const _apiBase = 'https://gateway.marvel.com:443/v1/public/';\r\n    const _apiKey = process.env.REACT_APP_API_KEY;\r\n    const _baseOffset = 210;\r\n\r\n    const getAllCharacters = async (offset = _baseOffset) => {\r\n        const res = await request(`${_apiBase}characters?limit=9&offset=${offset}&${_apiKey}`);\r\n        return res.data.results.map(_transformCharacter);\r\n    }\r\n\r\n    const getCharacter = async (id) => {\r\n        const res = await request(`${_apiBase}characters/${id}?&${_apiKey}`);\r\n        return _transformCharacter(res.data.results[0]);\r\n    }\r\n\r\n    const getAllComics = async (offset = _baseOffset) => {\r\n        const res = await request(`${_apiBase}comics?limit=8&offset=${offset}&${_apiKey}`);\r\n        return res.data.results.map(_transformComics);\r\n    }\r\n\r\n    const getComic = async (id) => {\r\n\t\tconst res = await request(`${_apiBase}comics/${id}?${_apiKey}`);\r\n\t\treturn _transformComics(res.data.results[0]);\r\n\t};\r\n\r\n    const getCharByName = async (name = 'Thor') => {\r\n        const res = await request(`${_apiBase}characters?name=${name}&${_apiKey}`);\r\n\t\treturn res.data.results.map(_transformCharacter);\r\n    }\r\n\r\n    const _transformCharacter = (char) => {\r\n        return {\r\n            id: char.id,\r\n            name: char.name,\r\n            description: !char.description ? \"Unfortunately there is no description for this character\" : char.description.slice(0, 210),\r\n            thumbnail: char.thumbnail.path + '.' + char.thumbnail.extension,\r\n            homepage: char.urls[0].url,\r\n            wiki: char.urls[1].url,\r\n            comics: char.comics.items.splice(0, 10)\r\n        }\r\n    }\r\n\r\n    const _transformComics = comic => {\r\n        return {\r\n            id: comic.id,\r\n            title: comic.title,\r\n            description: comic.description || \"There is no description\",\r\n\t\t\tpageCount: comic.pageCount ? `${comic.pageCount} p.` : \"No information about the number of pages\",\r\n            language: comic.textObjects[0]?.language || \"en-us\",\r\n            price: comic.prices[0].price ? `${comic.prices[0].price}$` : \"not available\",\r\n            thumbnail: `${comic.thumbnail.path}.${comic.thumbnail.extension}`\r\n        }\r\n\r\n    }\r\n\r\n    return {clearError,\r\n            processState,\r\n            setProcessState,\r\n            getAllCharacters,\r\n            getCharacter,\r\n            getCharByName,\r\n            getAllComics,\r\n            getComic};\r\n}\r\n\r\nexport default useMarvelService;","import {useState, useCallback} from \"react\";\r\n\r\nexport const useHttp = () => {\r\n    const [processState, setProcessState] = useState('waiting');\r\n\r\n    const request = useCallback(\r\n        async (url, method = 'GET', body = null, headers = {'Content-Type': 'aplication/json'}) => {\r\n\r\n            setProcessState('loading');\r\n\r\n            try {\r\n                const response = await fetch(url, {method, body, headers});\r\n\r\n                if(!response.ok) {\r\n                    throw new Error(`Could not fetch ${url}, status: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n\r\n                return data;\r\n\r\n            } catch(e) {\r\n                setProcessState('error');\r\n                throw e;\r\n            }\r\n    }, [])\r\n\r\n    const clearError = useCallback(() => {\r\n        setProcessState('loading');\r\n    }, []);\r\n\r\n    return {request, clearError, processState, setProcessState};\r\n}","export default __webpack_public_path__ + \"static/media/Avengers.4065c8f9.png\";","export default __webpack_public_path__ + \"static/media/Avengers_logo.9eaf2193.png\";","import './appBanner.scss';\nimport avengers from '../../resources/img/Avengers.png';\nimport avengersLogo from '../../resources/img/Avengers_logo.png';\n\nconst AppBanner = () => {\n    return (\n        <div className=\"app__banner\">\n            <img src={avengers} alt=\"Avengers\"/>\n            <div className=\"app__banner-text\">\n                New comics every week!<br/>\n                Stay tuned!\n            </div>\n            <img src={avengersLogo} alt=\"Avengers logo\"/>\n        </div>\n    )\n}\n\nexport default AppBanner;","import {useState, useEffect} from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Spinner from '../spinner/Spinner';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\nimport useMarvelService from '../../services/MarvelService';\r\n\r\nimport './comicsList.scss';\r\n\r\nconst setContent = (process, Component, newItemLoading) => {\r\n    switch (process) {\r\n        case 'waiting': \r\n            return <Spinner/>;\r\n        case 'loading':\r\n            return newItemLoading ? <Component/> : <Spinner/>;\r\n        case 'confirmed':\r\n            return <Component/>\r\n        case 'error':\r\n            return <ErrorMessage/>;\r\n        default:\r\n            throw new Error('Unexpected process state');\r\n    }\r\n}\r\n\r\nconst ComicsList = () => {\r\n\r\n    const [comicsList, setComicsList] = useState([]);\r\n    const [newItemLoading, setNewItemLoading] = useState(false);\r\n    const [offset, setOffset] = useState(202);\r\n    const [comicsEnded, setComicsEnded] = useState(false);\r\n\r\n    const {getAllComics, processState, setProcessState} = useMarvelService();\r\n\r\n    useEffect(() => {\r\n        onRequest(offset, true);\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const onRequest = (offset, initial) => {\r\n        initial ? setNewItemLoading(false) : setNewItemLoading(true);\r\n        getAllComics(offset)\r\n            .then(onComicsListLoaded)\r\n            .then(() => setProcessState('confirmed'));\r\n    }\r\n\r\n    const onComicsListLoaded = (newComicsList) => {\r\n        let ended = false;\r\n        if(newComicsList.length < 8) {\r\n            ended = true\r\n        }\r\n\r\n        setComicsList(comicsList => [...comicsList, ...newComicsList]);\r\n        setNewItemLoading(false);\r\n        setOffset(offset => offset + 8);\r\n        setComicsEnded(ended);\r\n    }\r\n\r\n    function renderComics(arr) {\r\n        const items =  arr.map((item, i) => {          \r\n            return (\r\n                <li className=\"comics__item\"\r\n                    tabIndex={0}\r\n                    key={i}>\r\n                    <Link to={`/comics/${item.id}`}>\r\n                        <img src={item.thumbnail} alt={item.title} className=\"comics__item-img\"/>\r\n                        <div className=\"comics__item-name\">{item.title}</div>\r\n                        <div className=\"comics__item-price\">{item.price}</div>\r\n                    </Link>\r\n                </li>\r\n            )\r\n        });\r\n        // А эта конструкция вынесена для центровки спиннера/ошибки\r\n        return (\r\n            <ul className=\"comics__grid\">\r\n                {items}\r\n            </ul>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"comics__list\">\r\n            {setContent(processState, () => renderComics(comicsList), newItemLoading)}\r\n            <button className=\"button button__main button__long\"\r\n                    disabled={newItemLoading}\r\n                    style={{'display': comicsEnded ? 'none' : 'block'}}\r\n                    onClick={() => onRequest(offset)}>\r\n                <div className=\"inner\">load more</div>\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ComicsList;","import { Helmet } from \"react-helmet\";\r\n\r\nimport ComicsList from \"../comicsList/ComicsList\";\r\nimport AppBanner from \"../appBanner/AppBanner\";\r\n\r\nconst ComicsPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta\r\n                    name=\"description\"\r\n                    content=\"Page with list of our comics\"\r\n                />\r\n                <title>Comics page</title>\r\n            </Helmet>\r\n            <AppBanner/>\r\n            <ComicsList/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ComicsPage;"],"sourceRoot":""}